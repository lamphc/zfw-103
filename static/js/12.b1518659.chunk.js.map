{"version":3,"sources":["utils/api/user.js","utils/api/house.js","components/HousePackage/index.js","components/HousePackage/index.module.css","pages/Rent/Add/index.module.css","pages/Rent/Add/index.js"],"names":["login","data","request","post","getUserData","get","logout","checkFav","id","addFav","delFav","delete","getPubHouse","pubHouse","getFilters","params","getListByFilter","cityId","filters","start","end","getDetail","uploadHouseImg","formData","HOUSE_PACKAGE","name","icon","HousePackage","state","selectedNames","toggleSelect","newSelectedNames","indexOf","filter","item","props","onSelect","setState","this","select","list","v","includes","map","isSelected","key","className","styles","active","join","onClick","root","renderItems","Component","module","exports","alert","roomTypeData","label","value","orientedData","floorData","RentAdd","onCancel","text","onPress","a","history","go","handlerInput","val","upload","files","type","index","console","log","tempSlides","addHouse","price","size","roomType","floor","oriented","title","supporting","description","community","length","info","fd","FormData","forEach","append","file","status","houseImg","fail","houseData","sta","desc","success","push","location","comun","Item","navHeader","mode","onLeftClick","header","renderHeader","data-role","extra","arrow","replace","placeholder","onChange","cols","pics","multiple","accept","imgpicker","seled","rows","autoHeight","bottom","cancel","confirm"],"mappings":"2GAAA,4RAOO,SAASA,EAAOC,GACrB,OAAOC,IAAQC,KAAK,cAAeF,GAM9B,SAASG,IACd,OAAOF,IAAQG,IAAI,SAOd,SAASC,IACd,OAAOJ,IAAQC,KAAK,gBAOf,SAASI,EAAUC,GACxB,OAAON,IAAQG,IAAR,0BAA+BG,IAOjC,SAASC,EAAQD,GACtB,OAAON,IAAQC,KAAR,0BAAgCK,IAOlC,SAASE,EAAQF,GACtB,OAAON,IAAQS,OAAR,0BAAkCH,IAMpC,SAASI,IACd,OAAOV,IAAQG,IAAI,gBAOd,SAASQ,EAAUZ,GACxB,OAAOC,IAAQC,KAAK,eAAgBF,K,8LCrD/B,SAASa,EAAYN,GAC1B,OAAON,IAAQG,IAAI,oBAAqB,CACtCU,OAAQ,CAAEP,QAWP,SAASQ,EAAiBC,EAAQC,GAA+B,IAAtBC,EAAqB,uDAAb,EAAGC,EAAU,uDAAJ,GACjE,OAAOlB,IAAQG,IAAI,UAAW,CAC5BU,OAAO,yBACLE,UACGC,GAFC,IAGJC,QACAC,UASC,SAASC,EAAWb,GACzB,OAAON,IAAQG,IAAR,kBAAuBG,IAOzB,SAASc,EAAgBC,GAC9B,OAAOrB,IAAQC,KAAK,gBAAiBoB,K,kJCzCjCC,EAAgB,CACpB,CACEhB,GAAI,EACJiB,KAAM,eACNC,KAAM,iBAER,CACElB,GAAI,EACJiB,KAAM,qBACNC,KAAM,aAER,CACElB,GAAI,EACJiB,KAAM,eACNC,KAAM,YAER,CACElB,GAAI,EACJiB,KAAM,qBACNC,KAAM,YAER,CACElB,GAAI,EACJiB,KAAM,eACNC,KAAM,YAER,CACElB,GAAI,EACJiB,KAAM,eACNC,KAAM,aAER,CACElB,GAAI,EACJiB,KAAM,eACNC,KAAM,YAER,CACElB,GAAI,EACJiB,KAAM,qBACNC,KAAM,eAER,CACElB,GAAI,EACJiB,KAAM,eACNC,KAAM,kBAER,CACElB,GAAI,GACJiB,KAAM,eACNC,KAAM,cAWWC,E,4MACnBC,MAAQ,CAENC,cAAe,I,EAIjBC,aAAe,SAAAL,GAAS,IAElBM,EADIF,EAAkB,EAAKD,MAAvBC,cAMNE,EAFEF,EAAcG,QAAQP,IAAS,EAEdI,EAAcI,QAAO,SAAAC,GAAI,OAAIA,IAAST,KAGzC,sBAAOI,GAAP,CAAsBJ,IAIxC,EAAKU,MAAMC,SAASL,GAEpB,EAAKM,SAAS,CACZR,cAAeE,K,4DAKJ,IAAD,OACJF,EAAkBS,KAAKV,MAAvBC,cADI,EAIaS,KAAKH,MAAtBI,EAJI,EAIJA,OAAQC,EAJJ,EAIIA,KAahB,OARID,EACKf,EAIAA,EAAcS,QAAO,SAAAQ,GAAC,OAAID,EAAKE,SAASD,EAAEhB,UAGvCkB,KAAI,SAAAT,GAEd,IAAMU,EAAaf,EAAcG,QAAQE,EAAKT,OAAS,EAEvD,OACE,wBACEoB,IAAKX,EAAK1B,GACVsC,UAAW,CAACC,IAAOb,KAAMU,EAAaG,IAAOC,OAAS,IAAIC,KAAK,KAC/DC,QAASX,GAAW,kBAAM,EAAKT,aAAaI,EAAKT,QAEjD,2BACE,uBAAGqB,UAAS,mBAAcZ,EAAKR,KAAnB,YAA2BqB,IAAOrB,SAE/CQ,EAAKT,W,+BAOZ,OAAO,wBAAIqB,UAAWC,IAAOI,MAAOb,KAAKc,mB,GAlEHC,c,oBChE1CC,EAAOC,QAAU,CAAC,KAAO,2BAA2B,KAAO,2BAA2B,OAAS,6BAA6B,KAAO,6B,oBCAnID,EAAOC,QAAU,CAAC,KAAO,kBAAkB,OAAS,oBAAoB,OAAS,oBAAoB,UAAY,uBAAuB,MAAQ,mBAAmB,MAAQ,mBAAmB,QAAU,qBAAqB,MAAQ,mBAAmB,KAAO,kBAAkB,WAAa,wBAAwB,KAAO,oB,4dCqBvTC,EAAQ,IAAMA,MAGdC,EAAe,CACnB,CAAEC,MAAO,eAAMC,MAAO,2BACtB,CAAED,MAAO,eAAMC,MAAO,2BACtB,CAAED,MAAO,eAAMC,MAAO,2BACtB,CAAED,MAAO,eAAMC,MAAO,2BACtB,CAAED,MAAO,gBAAOC,MAAO,4BAInBC,EAAe,CACnB,CAAEF,MAAO,SAAKC,MAAO,4BACrB,CAAED,MAAO,SAAKC,MAAO,4BACrB,CAAED,MAAO,SAAKC,MAAO,4BACrB,CAAED,MAAO,SAAKC,MAAO,4BACrB,CAAED,MAAO,eAAMC,MAAO,4BACtB,CAAED,MAAO,eAAMC,MAAO,4BACtB,CAAED,MAAO,eAAMC,MAAO,4BACtB,CAAED,MAAO,eAAMC,MAAO,6BAIlBE,EAAY,CAChB,CAAEH,MAAO,qBAAOC,MAAO,WACvB,CAAED,MAAO,qBAAOC,MAAO,WACvB,CAAED,MAAO,qBAAOC,MAAO,YAGJG,E,kDACnB,WAAY3B,GAAQ,IAAD,uBACjB,cAAMA,IAmCR4B,SAAW,WACTP,EAAM,eAAM,wCAAW,CACrB,CACEQ,KAAM,eACNC,QAAQ,WAAD,4BAAE,sBAAAC,EAAA,+EAAY,EAAK/B,MAAMgC,QAAQC,IAAI,IAAnC,2CAAF,kDAAC,IAEV,CACEJ,KAAM,+BA3CO,EAiDnBK,aAAe,SAAC5C,EAAM6C,GACpB,EAAKjC,SAAL,eACGZ,EAAO6C,KAnDO,EA6DnBC,OAAS,SAACC,EAAOC,EAAMC,GACrBC,QAAQC,IAAIJ,EAAOC,EAAMC,GACzB,EAAKrC,SAAS,CAAEwC,WAAYL,KA/DX,EAmEnBM,SAnEmB,sBAmER,kEAAAZ,EAAA,2DAsBL,EAAKtC,MAlBPiD,EAJO,EAIPA,WAEAE,EANO,EAMPA,MAEAC,EARO,EAQPA,KAEAC,EAVO,EAUPA,SAEAC,EAZO,EAYPA,MAEAC,EAdO,EAcPA,SAEAC,EAhBO,EAgBPA,MAEAC,EAlBO,EAkBPA,WAEAC,EApBO,EAoBPA,YACAC,EArBO,EAqBPA,UAGGH,GAAUJ,GAASD,GAAUF,EAAWW,OAxBpC,yCAyBA,IAAMC,KAAK,mDAAY,IAzBvB,cAmCHC,EAAK,IAAIC,SACfd,EAAWe,SAAQ,SAAC1D,GAAD,OAAUwD,EAAGG,OAAO,OAAQ3D,EAAK4D,SApC3C,SAqCsBxE,YAAeoE,GArCrC,mBAqCDK,EArCC,EAqCDA,OAAQ9F,EArCP,EAqCOA,KACD,MAAX8F,EAtCK,iBAwCPC,EAAW/F,EAAKgD,KAAK,KAxCd,iDA0CA,IAAMgD,KAAK,mCA1CX,eA0DHC,EAAY,CAEhBnB,QAEAC,OAEAC,WAEAC,QAEAC,WAEAC,QAEAC,aAEAC,cAEAU,WAEAT,UAAWA,EAAU/E,IA9Ed,UAiFwCK,YAASqF,GAjFjD,iBAiFOC,EAjFP,EAiFDJ,OAA0BK,EAjFzB,EAiFYd,YACT,MAARa,EACF,IAAME,QAAQ,6CAAW,GAAG,WAE1B,EAAKlE,MAAMgC,QAAQmC,KAAK,YAG1B,IAAML,KAAKG,GAxFJ,4CAjETzB,QAAQC,IAAI,EAAKzC,OAFA,IAGTlC,EAAS,EAAKkC,MAAMoE,SAApBtG,KAGFuG,EAAQ,CAAEhG,GAAE,OAAEP,QAAF,IAAEA,OAAF,EAAEA,EAAMO,GAAIiB,KAAI,OAAExB,QAAF,IAAEA,OAAF,EAAEA,EAAMwB,MANzB,OAQjB,EAAKG,MAAQ,CAEXiD,WAAY,GAGZU,UAAWiB,EAEXzB,MAAO,GAEPC,KAAM,GAENC,SAAU,GAEVC,MAAO,GAEPC,SAAU,GAEVC,MAAO,GAEPY,SAAU,GAEVX,WAAY,GAEZC,YAAa,IA/BE,E,qDAgKR,IAAD,OACFmB,EAAO,IAAKA,KACVtC,EAAY7B,KAAKH,MAAjBgC,QAFA,EAaJ7B,KAAKV,MATP2D,EAJM,EAINA,UACAR,EALM,EAKNA,MACAC,EANM,EAMNA,KACAC,EAPM,EAONA,SACAC,EARM,EAQNA,MACAC,EATM,EASNA,SACAG,EAVM,EAUNA,YACAT,EAXM,EAWNA,WACAO,EAZM,EAYNA,MAGF,OACE,yBAAKtC,UAAWC,IAAOI,MACrB,uBACEL,UAAWC,IAAO2D,UAClBC,KAAK,OACLjF,KAAM,uBAAM+C,KAAK,SACjBmC,YAAatE,KAAKyB,UAJpB,4BAQA,uBACEjB,UAAWC,IAAO8D,OAClBC,aAAc,iBAAM,4BACpBC,YAAU,aAGV,kBAACN,EAAD,CACEO,MAAOzB,EAAU9D,MAAQ,6CACzBwF,MAAM,aACN/D,QAAS,kBAAMiB,EAAQ+C,QAAQ,kBAHjC,4BAOA,uBAAWC,YAAY,wCAAUH,MAAM,gBAAMvC,KAAK,SAASd,MAAOoB,EAAOqC,SAAU,SAAC3E,GAAD,OAAO,EAAK4B,aAAa,QAAS5B,KAArH,4CAGA,uBAAW0E,YAAY,6CAAUH,MAAM,SAAIvC,KAAK,SAASd,MAAOqB,EAAMoC,SAAU,SAAC3E,GAAD,OAAO,EAAK4B,aAAa,OAAQ5B,KAAjH,4BAGA,uBAAQxC,KAAMwD,EAAcE,MAAO,CAACsB,GAAWmC,SAAU,SAAC3E,GAAD,OAAO,EAAK4B,aAAa,WAAY5B,EAAE,KAAK4E,KAAM,GACzG,kBAACZ,EAAD,CAAMQ,MAAM,cAAZ,6CAKF,uBAAQhH,KAAM4D,EAAWF,MAAO,CAACuB,GAAQkC,SAAU,SAAC3E,GAAD,OAAO,EAAK4B,aAAa,QAAS5B,EAAE,KAAK4E,KAAM,GAChG,kBAACZ,EAAD,CAAMQ,MAAM,cAAZ,6BAEF,uBAAQhH,KAAM2D,EAAcD,MAAO,CAACwB,GAAWiC,SAAU,SAAC3E,GAAD,OAAO,EAAK4B,aAAa,WAAY5B,EAAE,KAAK4E,KAAM,GACzG,kBAACZ,EAAD,CAAMQ,MAAM,cAAZ,8CAMJ,uBACEnE,UAAWC,IAAOqC,MAClB0B,aAAc,iBAAM,4BACpBC,YAAU,aAEV,uBACEI,YAAY,iHACZxD,MAAOyB,EACPgC,SAAU,SAAC3E,GAAD,OAAO,EAAK4B,aAAa,QAAS5B,OAIhD,uBACEK,UAAWC,IAAOuE,KAClBR,aAAc,iBAAM,4BACpBC,YAAU,aAEV,uBACEvC,MAAOK,EACPuC,SAAU9E,KAAKiC,OAEfgD,UAAU,EAEVC,OAAO,sBACP1E,UAAWC,IAAO0E,aAItB,uBACE3E,UAAWC,IAAOsC,WAClByB,aAAc,iBAAM,4BACpBC,YAAU,aAEV,kBAAC,IAAD,CAAcxE,QAAM,EAACH,SAAU,SAACsF,GAC9B/C,QAAQC,IAAI,mDAAY8C,GAExB,EAAKrF,SAAS,CACZgD,WAAYqC,EAAMzE,KAAK,WAK7B,uBACEH,UAAWC,IAAOqD,KAClBU,aAAc,iBAAM,4BACpBC,YAAU,aAEV,uBACEY,KAAM,EACNR,YAAY,yDACZS,YAAU,EACVjE,MAAO2B,EACP8B,SAAU,SAAC3E,GAAD,OAAO,EAAK4B,aAAa,cAAe5B,OAItD,uBAAMK,UAAWC,IAAO8E,QACtB,sBAAMpB,KAAN,CAAW3D,UAAWC,IAAO+E,OAAQ5E,QAASZ,KAAKyB,UAAnD,gBAGA,sBAAM0C,KAAN,CAAW3D,UAAWC,IAAOgF,QAAS7E,QAASZ,KAAKwC,UAApD,sB,GAzR2BzB","file":"static/js/12.b1518659.chunk.js","sourcesContent":["import request from '../request'\n\n\n/**\n * 用户 =》后台接口\n */\n\nexport function login (data) {\n  return request.post('/user/login', data)\n}\n\n/**\n * 获取当前登录人信息\n */\nexport function getUserData () {\n  return request.get('/user')\n}\n\n\n/**\n * 退出登录\n */\nexport function logout () {\n  return request.post('/user/logout')\n}\n\n/**\n * 查询房源是否收藏过\n * @param {*} id 房源ID\n */\nexport function checkFav (id) {\n  return request.get(`/user/favorites/${id}`)\n}\n\n/**\n * 添加收藏\n * @param {*} id 房源ID\n */\nexport function addFav (id) {\n  return request.post(`/user/favorites/${id}`)\n}\n\n/**\n * 删除收藏\n * @param {*} id 房源ID\n */\nexport function delFav (id) {\n  return request.delete(`/user/favorites/${id}`)\n}\n\n/**\n * 获取已发布房源列表数据\n */\nexport function getPubHouse () {\n  return request.get('/user/houses')\n}\n\n/**\n * 发布房源\n * @param {*} data 房源数据\n */\nexport function pubHouse (data) {\n  return request.post('/user/houses', data)\n}","import request from '../request'\n\n/**\n * 房屋=》后台接口\n */\n/**\n * 获取列表找房筛选条件数据\n * @param {*} id 当前定位城市的ID\n */\nexport function getFilters (id) {\n  return request.get('/houses/condition', {\n    params: { id }\n  })\n}\n\n/**\n * \n * @param {*} cityId 当前定位城市ID/小区ID\n * @param {*} filters 查询条件\n * @param {*} start 数据开始\n * @param {*} end  数据结束\n */\nexport function getListByFilter (cityId, filters, start = 1, end = 20) {\n  return request.get('/houses', {\n    params: {\n      cityId,\n      ...filters,\n      start,\n      end\n    }\n  })\n}\n\n/**\n * 房源详情\n * @param {*} id 房源ID\n */\nexport function getDetail (id) {\n  return request.get(`/houses/${id}`)\n}\n\n/**\n * 上传房源图片\n * @param {*} formData formData格式的图片数据\n */\nexport function uploadHouseImg (formData) {\n  return request.post('/houses/image', formData)\n}","import React, { Component } from 'react'\r\n\r\nimport styles from './index.module.css'\r\n\r\n// 所有房屋配套数据和图标\r\nconst HOUSE_PACKAGE = [\r\n  {\r\n    id: 1,\r\n    name: '衣柜',\r\n    icon: 'icon-wardrobe'\r\n  },\r\n  {\r\n    id: 2,\r\n    name: '洗衣机',\r\n    icon: 'icon-wash'\r\n  },\r\n  {\r\n    id: 3,\r\n    name: '空调',\r\n    icon: 'icon-air'\r\n  },\r\n  {\r\n    id: 4,\r\n    name: '天然气',\r\n    icon: 'icon-gas'\r\n  },\r\n  {\r\n    id: 5,\r\n    name: '冰箱',\r\n    icon: 'icon-ref'\r\n  },\r\n  {\r\n    id: 6,\r\n    name: '暖气',\r\n    icon: 'icon-Heat'\r\n  },\r\n  {\r\n    id: 7,\r\n    name: '电视',\r\n    icon: 'icon-vid'\r\n  },\r\n  {\r\n    id: 8,\r\n    name: '热水器',\r\n    icon: 'icon-heater'\r\n  },\r\n  {\r\n    id: 9,\r\n    name: '宽带',\r\n    icon: 'icon-broadband'\r\n  },\r\n  {\r\n    id: 10,\r\n    name: '沙发',\r\n    icon: 'icon-sofa'\r\n  }\r\n]\r\n\r\n/* \r\n  该组件的两种功能：\r\n  1 根据传入的 list 展示房屋配置列表（房源详情页面）\r\n    <HousePackage list={['衣柜', '洗衣机']} />\r\n  2 从所有配置列表中选择房屋配置（发布房源页面）\r\n    <HousePackage select onSelect={selectedItems => {...}} />\r\n*/\r\nexport default class HousePackage extends Component {\r\n  state = {\r\n    // 选中名称\r\n    selectedNames: []\r\n  }\r\n\r\n  // 根据id切换选中状态\r\n  toggleSelect = name => {\r\n    const { selectedNames } = this.state\r\n    let newSelectedNames\r\n\r\n    // 判断该项是否选中\r\n    if (selectedNames.indexOf(name) > -1) {\r\n      // 选中：从数组中删除选中项，也就是保留未选中项\r\n      newSelectedNames = selectedNames.filter(item => item !== name)\r\n    } else {\r\n      // 未选中：添加到数组中\r\n      newSelectedNames = [...selectedNames, name]\r\n    }\r\n\r\n    // 传递给父组件\r\n    this.props.onSelect(newSelectedNames)\r\n\r\n    this.setState({\r\n      selectedNames: newSelectedNames\r\n    })\r\n  }\r\n\r\n  // 渲染列表项\r\n  renderItems() {\r\n    const { selectedNames } = this.state\r\n    // select 的值为 true 表示 选择房屋配置；false 表示仅展示房屋列表\r\n    // list 表示要展示的列表项\r\n    const { select, list } = this.props\r\n\r\n    let data\r\n    // 如果传了 select 表示：选择 房屋配置\r\n    // 如果没传 select 表示：展示 房屋配置 列表\r\n    if (select) {\r\n      data = HOUSE_PACKAGE\r\n    } else {\r\n      // 展示房屋配置列表\r\n      // 从所有的列表项中过滤出要展示的（list）列表项\r\n      data = HOUSE_PACKAGE.filter(v => list.includes(v.name))\r\n    }\r\n\r\n    return data.map(item => {\r\n      // 判断该项是否选中\r\n      const isSelected = selectedNames.indexOf(item.name) > -1\r\n\r\n      return (\r\n        <li\r\n          key={item.id}\r\n          className={[styles.item, isSelected ? styles.active : ''].join(' ')}\r\n          onClick={select && (() => this.toggleSelect(item.name))}\r\n        >\r\n          <p>\r\n            <i className={`iconfont ${item.icon} ${styles.icon}`} />\r\n          </p>\r\n          {item.name}\r\n        </li>\r\n      )\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return <ul className={styles.root}>{this.renderItems()}</ul>\r\n  }\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"HousePackage_root__1MUw0\",\"item\":\"HousePackage_item__2q4AQ\",\"active\":\"HousePackage_active__dDdti\",\"icon\":\"HousePackage_icon__2hT31\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Add_root__2_C-z\",\"bottom\":\"Add_bottom__Pir6G\",\"cancel\":\"Add_cancel__1f986\",\"imgpicker\":\"Add_imgpicker__2WCKl\",\"input\":\"Add_input__KvW_g\",\"label\":\"Add_label__1-z0u\",\"confirm\":\"Add_confirm__34c_r\",\"title\":\"Add_title__eWgIh\",\"pics\":\"Add_pics__2r1Id\",\"supporting\":\"Add_supporting__3H7fo\",\"desc\":\"Add_desc__1Gqte\"};","import React, { Component } from 'react'\r\n\r\nimport {\r\n  Flex,\r\n  List,\r\n  InputItem,\r\n  Picker,\r\n  ImagePicker,\r\n  TextareaItem,\r\n  Modal,\r\n  NavBar,\r\n  Icon,\r\n  Toast\r\n} from 'antd-mobile'\r\n\r\nimport HousePackage from '../../../components/HousePackage'\r\n\r\n\r\nimport styles from './index.module.css'\r\nimport { uploadHouseImg } from '../../../utils/api/house'\r\nimport { pubHouse } from '../../../utils/api/user'\r\n\r\nconst alert = Modal.alert\r\n\r\n// 房屋类型\r\nconst roomTypeData = [\r\n  { label: '一室', value: 'ROOM|d4a692e4-a177-37fd' },\r\n  { label: '二室', value: 'ROOM|d1a00384-5801-d5cd' },\r\n  { label: '三室', value: 'ROOM|20903ae0-c7bc-f2e2' },\r\n  { label: '四室', value: 'ROOM|ce2a5daa-811d-2f49' },\r\n  { label: '四室+', value: 'ROOM|2731c38c-5b19-ff7f' }\r\n]\r\n\r\n// 朝向：\r\nconst orientedData = [\r\n  { label: '东', value: 'ORIEN|141b98bf-1ad0-11e3' },\r\n  { label: '西', value: 'ORIEN|103fb3aa-e8b4-de0e' },\r\n  { label: '南', value: 'ORIEN|61e99445-e95e-7f37' },\r\n  { label: '北', value: 'ORIEN|caa6f80b-b764-c2df' },\r\n  { label: '东南', value: 'ORIEN|dfb1b36b-e0d1-0977' },\r\n  { label: '东北', value: 'ORIEN|67ac2205-7e0f-c057' },\r\n  { label: '西南', value: 'ORIEN|2354e89e-3918-9cef' },\r\n  { label: '西北', value: 'ORIEN|80795f1a-e32f-feb9' }\r\n]\r\n\r\n// 楼层\r\nconst floorData = [\r\n  { label: '高楼层', value: 'FLOOR|1' },\r\n  { label: '中楼层', value: 'FLOOR|2' },\r\n  { label: '低楼层', value: 'FLOOR|3' }\r\n]\r\n\r\nexport default class RentAdd extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    console.log(this.props)\r\n    const { data } = this.props.location\r\n    // console.log(111, data)\r\n    // 对象不存在=》防止对象不存在，获取属性报错使用：obj?.key\r\n    const comun = { id: data?.id, name: data?.name }\r\n\r\n    this.state = {\r\n      // 临时图片地址\r\n      tempSlides: [],\r\n\r\n      // 小区的名称和id\r\n      community: comun,\r\n      // 价格\r\n      price: '',\r\n      // 面积\r\n      size: '',\r\n      // 房屋类型\r\n      roomType: '',\r\n      // 楼层\r\n      floor: '',\r\n      // 朝向：\r\n      oriented: '',\r\n      // 房屋标题\r\n      title: '',\r\n      // 房屋图片\r\n      houseImg: '',\r\n      // 房屋配套：\r\n      supporting: '',\r\n      // 房屋描述\r\n      description: ''\r\n    }\r\n  }\r\n\r\n  // 取消编辑，返回上一页\r\n  onCancel = () => {\r\n    alert('提示', '放弃发布房源?', [\r\n      {\r\n        text: '放弃',\r\n        onPress: async () => this.props.history.go(-1)\r\n      },\r\n      {\r\n        text: '继续编辑'\r\n      }\r\n    ])\r\n  }\r\n\r\n  // 处理表单的输入和选择=》受控\r\n  handlerInput = (name, val) => {\r\n    this.setState({\r\n      [name]: val\r\n    })\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {*} files 选择图片的数据:[]\r\n   * @param {*} type 操作类型：添加或删除\r\n   * @param {*} index 代表删除选择图片的索引\r\n   */\r\n  upload = (files, type, index) => {\r\n    console.log(files, type, index)\r\n    this.setState({ tempSlides: files })\r\n  }\r\n\r\n  // 发布房源\r\n  addHouse = async () => {\r\n    // 获取表单数据\r\n    const {\r\n      // 临时图片地址\r\n      tempSlides,\r\n      // 价格\r\n      price,\r\n      // 面积\r\n      size,\r\n      // 房屋类型\r\n      roomType,\r\n      // 楼层\r\n      floor,\r\n      // 朝向：\r\n      oriented,\r\n      // 房屋标题\r\n      title,\r\n      // 房屋配套：\r\n      supporting,\r\n      // 房屋描述\r\n      description,\r\n      community\r\n    } = this.state\r\n    // 边界判断\r\n    if (!title || !size || !price || !tempSlides.length) {\r\n      return Toast.info('房源信息不完整！', 2)\r\n    }\r\n\r\n    // 上传房源图片\r\n    /**\r\n     * 1. 获取本地选择的房源图片\r\n     * 2. 把本地房源图片处理成formData格式，调用后台接口上传\r\n     */\r\n    // 房源图片服务器地址\r\n    let houseImg\r\n    const fd = new FormData()\r\n    tempSlides.forEach((item) => fd.append('file', item.file))\r\n    const { status, data } = await uploadHouseImg(fd)\r\n    if (status === 200) {\r\n      // console.log(status, data)\r\n      houseImg = data.join('|')\r\n    } else {\r\n      return Toast.fail('上传失败！')\r\n    }\r\n    // 发布房源\r\n    // 需要传递数据\r\n    // {\r\n    //   \"title\": \"整租 · 豪华小区 精装修出租 小区环境幽静\",\r\n    //   \"description\": \"【装修描述】 装修简洁，家电配齐，通风采光效果良好，格局方正。\",\r\n    //   \"houseImg\": \"img1|im2|img3\",\r\n    //   \"oriented\": \"ORIEN|caa6f80b-b764-c2df\",\r\n    //   \"supporting\": \"空调|洗衣机\",\r\n    //   \"price\": \"1234\",\r\n    //   \"roomType\": \"ROOM|ce2a5daa-811d-2f49\",\r\n    //   \"size\": \"123\",\r\n    //   \"floor\": \"FLOOR|1\",\r\n    //   \"community\": \"AREA|93cbbe43-741d-de54\"\r\n    // }\r\n    const houseData = {\r\n      // 价格\r\n      price,\r\n      // 面积\r\n      size,\r\n      // 房屋类型\r\n      roomType,\r\n      // 楼层\r\n      floor,\r\n      // 朝向：\r\n      oriented,\r\n      // 房屋标题\r\n      title,\r\n      // 房屋配套：\r\n      supporting,\r\n      // 房屋描述\r\n      description,\r\n      //  服务器图片地址集合\r\n      houseImg,\r\n      //  小区ID\r\n      community: community.id\r\n    }\r\n\r\n    const { status: sta, description: desc } = await pubHouse(houseData)\r\n    if (sta === 200) {\r\n      Toast.success('发布房源成功！', 2, () => {\r\n        // 跳转到房源管理页面\r\n        this.props.history.push('/rent')\r\n      })\r\n    } else {\r\n      Toast.fail(desc)\r\n    }\r\n\r\n  }\r\n\r\n  render () {\r\n    const Item = List.Item\r\n    const { history } = this.props\r\n    const {\r\n      community,\r\n      price,\r\n      size,\r\n      roomType,\r\n      floor,\r\n      oriented,\r\n      description,\r\n      tempSlides,\r\n      title\r\n    } = this.state\r\n\r\n    return (\r\n      <div className={styles.root}>\r\n        <NavBar\r\n          className={styles.navHeader}\r\n          mode=\"dark\"\r\n          icon={<Icon type=\"left\" />}\r\n          onLeftClick={this.onCancel}\r\n        >\r\n          发布房源\r\n        </NavBar>\r\n        <List\r\n          className={styles.header}\r\n          renderHeader={() => '基本信息'}\r\n          data-role=\"rent-list\"\r\n        >\r\n          {/* 选择所在小区 */}\r\n          <Item\r\n            extra={community.name || '请选择小区名称'}\r\n            arrow=\"horizontal\"\r\n            onClick={() => history.replace('/rent/search')}\r\n          >\r\n            小区名称\r\n          </Item>\r\n          <InputItem placeholder=\"请输入租金/月\" extra=\"￥/月\" type=\"number\" value={price} onChange={(v) => this.handlerInput('price', v)}>\r\n            租&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;金\r\n          </InputItem>\r\n          <InputItem placeholder=\"请输入建筑面积\" extra=\"㎡\" type=\"number\" value={size} onChange={(v) => this.handlerInput('size', v)}>\r\n            建筑面积\r\n          </InputItem>\r\n          <Picker data={roomTypeData} value={[roomType]} onChange={(v) => this.handlerInput('roomType', v[0])} cols={1}>\r\n            <Item arrow=\"horizontal\">\r\n              户&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;型\r\n            </Item>\r\n          </Picker>\r\n\r\n          <Picker data={floorData} value={[floor]} onChange={(v) => this.handlerInput('floor', v[0])} cols={1}>\r\n            <Item arrow=\"horizontal\">所在楼层</Item>\r\n          </Picker>\r\n          <Picker data={orientedData} value={[oriented]} onChange={(v) => this.handlerInput('oriented', v[0])} cols={1}>\r\n            <Item arrow=\"horizontal\">\r\n              朝&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;向\r\n            </Item>\r\n          </Picker>\r\n        </List>\r\n\r\n        <List\r\n          className={styles.title}\r\n          renderHeader={() => '房屋标题'}\r\n          data-role=\"rent-list\"\r\n        >\r\n          <InputItem\r\n            placeholder=\"请输入标题（例如：整租 小区名 2室 5000元）\"\r\n            value={title}\r\n            onChange={(v) => this.handlerInput('title', v)}\r\n          />\r\n        </List>\r\n\r\n        <List\r\n          className={styles.pics}\r\n          renderHeader={() => '房屋图像'}\r\n          data-role=\"rent-list\"\r\n        >\r\n          <ImagePicker\r\n            files={tempSlides}\r\n            onChange={this.upload}\r\n            // 多选\r\n            multiple={true}\r\n            // 格式限定\r\n            accept=\"image/jpg,image/png\"\r\n            className={styles.imgpicker}\r\n          />\r\n        </List>\r\n\r\n        <List\r\n          className={styles.supporting}\r\n          renderHeader={() => '房屋配置'}\r\n          data-role=\"rent-list\"\r\n        >\r\n          <HousePackage select onSelect={(seled) => {\r\n            console.log('当前选中的配套：', seled)\r\n            // 将数组处理成后台要求的字符串格式\r\n            this.setState({\r\n              supporting: seled.join('|')\r\n            })\r\n          }} />\r\n        </List>\r\n\r\n        <List\r\n          className={styles.desc}\r\n          renderHeader={() => '房屋描述'}\r\n          data-role=\"rent-list\"\r\n        >\r\n          <TextareaItem\r\n            rows={5}\r\n            placeholder=\"请输入房屋描述信息\"\r\n            autoHeight\r\n            value={description}\r\n            onChange={(v) => this.handlerInput('description', v)}\r\n          />\r\n        </List>\r\n\r\n        <Flex className={styles.bottom}>\r\n          <Flex.Item className={styles.cancel} onClick={this.onCancel}>\r\n            取消\r\n          </Flex.Item>\r\n          <Flex.Item className={styles.confirm} onClick={this.addHouse}>\r\n            提交\r\n          </Flex.Item>\r\n        </Flex>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n"],"sourceRoot":""}