{"version":3,"sources":["../node_modules/antd-mobile/lib/nav-bar/style/css.js","../node_modules/antd-mobile/lib/nav-bar/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","utils/api/house.js","components/HouseItem/index.js","components/HouseItem/index.module.css","pages/Map/index.module.css","pages/Map/index.jsx"],"names":["require","Object","defineProperty","exports","value","_extends3","_interopRequireDefault","_classCallCheck3","_createClass3","_possibleConstructorReturn3","_inherits3","_classnames2","React","obj","__esModule","newObj","key","prototype","hasOwnProperty","call","_interopRequireWildcard","__rest","s","e","t","p","indexOf","getOwnPropertySymbols","i","length","NavBar","_React$Component","this","__proto__","getPrototypeOf","apply","arguments","_a","props","prefixCls","className","children","mode","icon","onLeftClick","leftContent","rightContent","restProps","createElement","role","onClick","Component","defaultProps","module","ownKeys","object","enumerableOnly","keys","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","_objectSpread2","target","source","forEach","getOwnPropertyDescriptors","defineProperties","_defineProperty","configurable","writable","getFilters","id","request","get","params","getListByFilter","cityId","filters","start","end","getDetail","uploadHouseImg","formData","post","HouseItem","src","title","desc","tags","price","style","styles","house","imgWrap","img","alt","content","map","tag","index","tagClass","join","priceNum","Map","state","list","isShowList","renderHouseList","houseList","show","titleWrap","listTitle","titleMore","href","houseItems","item","history","houseCode","BASE_URL","houseImg","initMap","console","log","window","BMap","getCurrCity","cityName","label","Geocoder","getPoint","point","a","centerAndZoom","addControl","NavigationControl","ScaleControl","OverviewMapControl","MapTypeControl","marker","Marker","addOverlay","setAnimation","BMAP_ANIMATION_BOUNCE","renderOverlays","addEventListener","setState","getMapDataById","status","data","getTypeAndZoom","type","zoom","labelCallback","coord","longitude","latitude","name","count","ipoint","Point","opts","position","offset","Size","Label","setStyle","background","border","setContent","bubble","bubbleName","setTimeout","clearOverlays","rect","housename","housenum","arrow","handlerHouseList","moveToCenter","startPos","changedTouches","startX","clientX","startY","clientY","moveX","innerWidth","moveY","innerHeight","panBy","curZoom","getZoom","mapBox","goBack"],"mappings":"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","file":"static/js/11.07526e25.chunk.js","sourcesContent":["'use strict';\n\nrequire('../../style/css');\n\nrequire('./index.css');","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _classnames = require('classnames');\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nvar _react = require('react');\n\nvar React = _interopRequireWildcard(_react);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar __rest = undefined && undefined.__rest || function (s, e) {\n    var t = {};\n    for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n    }if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n        if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n    }return t;\n};\n\nvar NavBar = function (_React$Component) {\n    (0, _inherits3['default'])(NavBar, _React$Component);\n\n    function NavBar() {\n        (0, _classCallCheck3['default'])(this, NavBar);\n        return (0, _possibleConstructorReturn3['default'])(this, (NavBar.__proto__ || Object.getPrototypeOf(NavBar)).apply(this, arguments));\n    }\n\n    (0, _createClass3['default'])(NavBar, [{\n        key: 'render',\n        value: function render() {\n            var _a = this.props,\n                prefixCls = _a.prefixCls,\n                className = _a.className,\n                children = _a.children,\n                mode = _a.mode,\n                icon = _a.icon,\n                onLeftClick = _a.onLeftClick,\n                leftContent = _a.leftContent,\n                rightContent = _a.rightContent,\n                restProps = __rest(_a, [\"prefixCls\", \"className\", \"children\", \"mode\", \"icon\", \"onLeftClick\", \"leftContent\", \"rightContent\"]);\n            return React.createElement(\n                'div',\n                (0, _extends3['default'])({}, restProps, { className: (0, _classnames2['default'])(className, prefixCls, prefixCls + '-' + mode) }),\n                React.createElement(\n                    'div',\n                    { className: prefixCls + '-left', role: 'button', onClick: onLeftClick },\n                    icon ?\n                    // tslint:disable-next-line:jsx-no-multiline-js\n                    React.createElement(\n                        'span',\n                        { className: prefixCls + '-left-icon', 'aria-hidden': 'true' },\n                        icon\n                    ) : null,\n                    leftContent\n                ),\n                React.createElement(\n                    'div',\n                    { className: prefixCls + '-title' },\n                    children\n                ),\n                React.createElement(\n                    'div',\n                    { className: prefixCls + '-right' },\n                    rightContent\n                )\n            );\n        }\n    }]);\n    return NavBar;\n}(React.Component);\n\nexports['default'] = NavBar;\n\nNavBar.defaultProps = {\n    prefixCls: 'am-navbar',\n    mode: 'dark',\n    onLeftClick: function onLeftClick() {}\n};\nmodule.exports = exports['default'];","import defineProperty from \"./defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import request from '../request'\n\n/**\n * 房屋=》后台接口\n */\n/**\n * 获取列表找房筛选条件数据\n * @param {*} id 当前定位城市的ID\n */\nexport function getFilters (id) {\n  return request.get('/houses/condition', {\n    params: { id }\n  })\n}\n\n/**\n * \n * @param {*} cityId 当前定位城市ID/小区ID\n * @param {*} filters 查询条件\n * @param {*} start 数据开始\n * @param {*} end  数据结束\n */\nexport function getListByFilter (cityId, filters, start = 1, end = 20) {\n  return request.get('/houses', {\n    params: {\n      cityId,\n      ...filters,\n      start,\n      end\n    }\n  })\n}\n\n/**\n * 房源详情\n * @param {*} id 房源ID\n */\nexport function getDetail (id) {\n  return request.get(`/houses/${id}`)\n}\n\n/**\n * 上传房源图片\n * @param {*} formData formData格式的图片数据\n */\nexport function uploadHouseImg (formData) {\n  return request.post('/houses/image', formData)\n}","import React from 'react'\r\n\r\nimport PropTypes from 'prop-types'\r\n// props\r\n// 1. cheldren -> 获取组件动态内容  <Child>adadsd</Child>\r\n// 2. defautProps -> 为组件设置默认属性  num\r\n// 3. prop-types -> 为组件的属性提供默认类型  age\r\n\r\nimport styles from './index.module.css'\r\n\r\nfunction HouseItem({ src, title, desc, tags, price, onClick, style }) {\r\n  return (\r\n    <div className={styles.house} onClick={onClick} style={style}>\r\n      <div className={styles.imgWrap}>\r\n        <img className={styles.img} src={src} alt=\"\" />\r\n      </div>\r\n      <div className={styles.content}>\r\n        <h3 className={styles.title}>{title}</h3>\r\n        <div className={styles.desc}>{desc}</div>\r\n        <div>\r\n          {/* ['近地铁', '随时看房'] */}\r\n          {tags.map((tag, index) => {\r\n            const tagClass = 'tag' + (index + 1)\r\n            return (\r\n              <span\r\n                className={[styles.tag, styles[tagClass]].join(' ')}\r\n                key={tag}\r\n              >\r\n                {tag}\r\n              </span>\r\n            )\r\n          })}\r\n        </div>\r\n        <div className={styles.price}>\r\n          <span className={styles.priceNum}>{price}</span> 元/月\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nHouseItem.propTypes = {\r\n  // src: PropTypes.string,\r\n  // title: PropTypes.string,\r\n  // desc: PropTypes.string,\r\n  // tags: PropTypes.array.isRequired,\r\n  // price: PropTypes.number,\r\n  // onClick: PropTypes.func\r\n}\r\n\r\nexport default HouseItem\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"house\":\"HouseItem_house__29lYP\",\"imgWrap\":\"HouseItem_imgWrap__3ZPoa\",\"img\":\"HouseItem_img__1BaJK\",\"content\":\"HouseItem_content__1gVhj\",\"title\":\"HouseItem_title__2dXar\",\"desc\":\"HouseItem_desc__5-mp4\",\"price\":\"HouseItem_price__1_r8v\",\"priceNum\":\"HouseItem_priceNum__RGpsE\",\"tag\":\"HouseItem_tag__3MxYv\",\"tag1\":\"HouseItem_tag1__3VDnD\",\"tag2\":\"HouseItem_tag2__2IcZc\",\"tag3\":\"HouseItem_tag3__2L6o6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"mapBox\":\"Map_mapBox__2DWcv\",\"bubble\":\"Map_bubble__3_jsr\",\"bubbleName\":\"Map_bubbleName__1yPLO\",\"rect\":\"Map_rect__9DstZ\",\"arrow\":\"Map_arrow__Rl8cI\",\"housename\":\"Map_housename__3_AM2\",\"housenum\":\"Map_housenum__Trqvz\",\"houseList\":\"Map_houseList__3_QXT\",\"show\":\"Map_show__2ZuGm\",\"titleWrap\":\"Map_titleWrap__1rQyi\",\"listTitle\":\"Map_listTitle__BxeKe\",\"titleMore\":\"Map_titleMore__1F-hE\",\"houseItems\":\"Map_houseItems__2DX0Y\"};","import React, { Component } from 'react'\n// 导入组件样式\nimport styles from './index.module.css'\nimport { NavBar, Icon } from 'antd-mobile'\nimport { getCurrCity } from '../../utils'\nimport { getMapDataById } from '../../utils/api/city'\nimport { getListByFilter } from '../../utils/api/house'\nimport HouseItem from '../../components/HouseItem'\nimport { BASE_URL } from '../../utils/request'\n\nclass Map extends Component {\n  state = {\n    // 小区房源列表\n    list: [],\n    // 是否在地图中显示小区房源列表\n    isShowList: false,\n  }\n\n  componentDidMount() {\n    this.initMap()\n  }\n\n  // 初始化地图\n  async initMap() {\n    // 验证百度地图API是否成功引入=》成功会输出百度地图提供的方法对象\n    console.log(window.BMap)\n    // 解构百度地图API\n    // 存储到组件this上=》跨方法调用\n    this.BMap = window.BMap\n    // 1. 创建地图实例\n    this.map = new this.BMap.Map('container')\n    // 获取定位城市\n    const { label: cityName, value } = await getCurrCity()\n    // 地址解析=》解析经纬度=》Point\n    // 创建地址解析器实例\n    const myGeo = new this.BMap.Geocoder()\n    // 将地址解析结果显示在地图上，并调整地图视野\n    myGeo.getPoint(\n      null,\n      async (point) => {\n        if (point) {\n          // 2. 地图初始化,设置地图位置和地图展示级别\n          /**\n           * 第一参数：地图显示的中心位置\n           * 第二个参数：地图缩放级别=》数值越大：地图显示越详细，范围越小 =》数值越小：地图显示范围大，但是显示信息不详细\n           */\n          this.map.centerAndZoom(point, 11)\n          // 添加地图操作控件\n          // 地图平移缩放控件\n          this.map.addControl(new this.BMap.NavigationControl())\n          // 比例尺控件\n          this.map.addControl(new this.BMap.ScaleControl())\n          // 缩略图控件\n          this.map.addControl(new this.BMap.OverviewMapControl())\n          // 地图类型（卫星、三维）\n          this.map.addControl(new this.BMap.MapTypeControl())\n          // 添加marker覆盖物\n          const marker = new this.BMap.Marker(point)\n          this.map.addOverlay(marker)\n          // 设置动画\n          marker.setAnimation(window.BMAP_ANIMATION_BOUNCE) //跳动的动画\n\n          // 画第一层的圈圈\n          this.renderOverlays(value)\n        }\n      },\n      cityName\n    )\n\n    // 添加地图移动监控事件\n    this.map.addEventListener('movestart', () => {\n      const { isShowList } = this.state\n      if (isShowList) {\n        console.log('地图开始移动了')\n        // 地图移动时候=》如果小区列表显示=》关闭\n        this.setState({ isShowList: false })\n      }\n    })\n  }\n\n  /**\n   * 画圈圈并展示数据\n   * @param {*} value 城市ID/区ID/街道ID\n   */\n  async renderOverlays(value) {\n    // 测试：获取地图第一层覆盖物的数据\n    const { status, data } = await getMapDataById(value)\n    console.log(status, data)\n    // 确定当前画的覆盖物的形状和下一层的缩放大小\n    const { type, zoom } = this.getTypeAndZoom()\n    if (status === 200) {\n      /**\n       * 根据当前定位城市所有区的数据\n       * 1. 遍历所有区的数据=》画圈圈\n       * 2. 在圈圈上展示区的待出租房源数据\n       */\n      data.forEach((item) => {\n        // 获取定位城市区的数据\n        const {\n          coord: { longitude, latitude },\n          label: name,\n          count,\n          // 当前区到ID\n          value,\n        } = item\n        /**\n         * 创建文本覆盖物=>根据后台房源数据遍历创建展示房源数据的覆盖物\n         */\n        // 创建当前区的point点\n        const ipoint = new this.BMap.Point(longitude, latitude)\n        const opts = {\n          position: ipoint, // 指定文本标注所在的地理位置\n          offset: new this.BMap.Size(0, 0), //设置文本偏移量\n        }\n        // 创建文本覆盖物的实例\n        const label = new this.BMap.Label(null, opts)\n        // 设置文本覆盖物的样式\n        label.setStyle({\n          // 清除默认样式\n          background: 'transparent',\n          border: 0,\n        })\n        // 点击覆盖物的事件处理函数\n        let labelCallback\n        if (type === 'circle') {\n          // 画圈圈\n          // 设置html内容（不是jsx）\n          label.setContent(`\n        <div class=\"${styles.bubble}\">\n          <p class=\"${styles.bubbleName}\">${name}</p>\n          <p>${count}套</p>\n        </div>\n         `)\n          labelCallback = () => {\n            // 进入到当前区的下一层\n            /**\n             * 1. 清除上一层覆盖物（圈圈）;定位到当前坐标点和放大地图\n             * 2. 加载下一层数据=》画圈圈\n             */\n            this.map.centerAndZoom(ipoint, zoom)\n            // 异步执行清除覆盖物\n            setTimeout(() => {\n              this.map.clearOverlays()\n            }, 0)\n            // 画下一层覆盖物=》封装\n            /**\n             * value=》// 当前区到ID\n             */\n            this.renderOverlays(value)\n          }\n        } else {\n          // 画长方形\n          label.setContent(\n            `\n            <div class=\"${styles.rect}\">\n              <span class=\"${styles.housename}\">${name}</span>\n              <span class=\"${styles.housenum}\">${count}套</span>\n              <i class=\"${styles.arrow}\"></i>\n            </div>\n            `\n          )\n          labelCallback = (e) => {\n            console.log('在地图中加载当前点击小区的房源列表数据')\n            this.handlerHouseList(value)\n            //把当前点击小区移动到地图中心点\n            this.moveToCenter(e)\n          }\n        }\n\n        // 添加点击事件\n        label.addEventListener('click', labelCallback)\n        //  添加到地图中渲染\n        this.map.addOverlay(label)\n      })\n    }\n  }\n\n  //把当前点击小区移动到地图中心点\n  moveToCenter(e) {\n    /**\n     * 计算移动距离（x,y）?\n     * 1. 获取起点位置\n     * 2. 获取中心（终点）位置\n     * 3. 终点坐标-起点坐标=（x,y）移动差值\n     */\n    // console.log(e)\n    const [startPos] = e.changedTouches\n    // 起点坐标\n    let startX = startPos.clientX,\n      startY = startPos.clientY\n    // 终点坐标\n    let endX = window.innerWidth / 2,\n      endY = (window.innerHeight - 330) / 2\n    // 移动坐标\n    let moveX = endX - startX,\n      moveY = endY - startY\n    // 移动开始位置到终点\n    this.map.panBy(moveX, moveY)\n  }\n\n  // 确定当前画的覆盖物的形状和下一层的缩放大小\n  // 计算要绘制的覆盖物类型和下一个缩放级别\n  // 区   -> 11 ，范围：>=10 <12\n  // 街道   -> 13 ，范围：>=12 <14\n  // 小区 -> 15 ，范围：>=14 <16\n  /**\n   * type 覆盖物的形状\n   * zoom 下一层地图的缩放级别\n   */\n  getTypeAndZoom() {\n    let type, zoom\n    /**\n     * 如何确定？\n     * 1. 获取地图的缩放级别\n     * 2. 根据当前地图的缩放级别确定范围\n     */\n    const curZoom = this.map.getZoom()\n    console.log('curZoom:', curZoom)\n    if (curZoom >= 10 && curZoom < 12) {\n      type = 'circle'\n      // 第一层：区\n      zoom = 13\n    } else if (curZoom >= 12 && curZoom < 14) {\n      // 第二层：街道\n      type = 'circle'\n      zoom = 15\n    } else if (curZoom >= 14 && curZoom < 16) {\n      // 第三层：小区\n      type = 'rectangle'\n    }\n    return { type, zoom }\n  }\n\n  async handlerHouseList(id) {\n    let {\n      status,\n      data: { list },\n    } = await getListByFilter(id)\n    // console.log(status, data)\n    if (status === 200) {\n      this.setState({\n        list,\n        isShowList: true,\n      })\n    }\n  }\n\n  // 渲染小区下房屋列表\n  renderHouseList = () => {\n    return (\n      <div\n        className={[\n          styles.houseList,\n          this.state.isShowList ? styles.show : '',\n        ].join(' ')}>\n        <div className={styles.titleWrap}>\n          <h1 className={styles.listTitle}>房屋列表</h1>\n          <a className={styles.titleMore} href=\"/home/house\">\n            更多房源\n          </a>\n        </div>\n\n        <div className={styles.houseItems}>\n          {/* 房屋结构 */}\n          {this.state.list.map((item) => (\n            <HouseItem\n              onClick={() =>\n                this.props.history.push(`/detail/${item.houseCode}`)\n              }\n              key={item.houseCode}\n              src={BASE_URL + item.houseImg}\n              title={item.title}\n              desc={item.desc}\n              tags={item.tags}\n              price={item.price}\n            />\n          ))}\n        </div>\n      </div>\n    )\n  }\n\n  render() {\n    return (\n      <div className={styles.mapBox}>\n        <NavBar\n          mode=\"dark\"\n          icon={<Icon type=\"left\" />}\n          onLeftClick={() => this.props.history.goBack()}>\n          地图找房\n        </NavBar>\n        {/* 地图容器=》渲染百度地图 */}\n        <div id=\"container\"></div>\n        {/* 渲染小区列表 */}\n        {this.renderHouseList()}\n      </div>\n    )\n  }\n}\n\nexport default Map\n"],"sourceRoot":""}