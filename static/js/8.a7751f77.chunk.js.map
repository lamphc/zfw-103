{"version":3,"sources":["utils/api/house.js","components/HouseItem/index.js","components/HouseItem/index.module.css","components/NoHouse/index.js","components/NoHouse/index.module.css","pages/House/components/FilterTitle/index.module.css","../node_modules/antd-mobile/lib/picker-view/index.js","../node_modules/antd-mobile/lib/picker-view/PickerView.js","components/FilterFooter/index.module.css","pages/House/components/FilterMore/index.module.css","pages/House/components/Filter/index.module.css","pages/House/index.module.css","pages/House/components/FilterTitle/index.js","components/FilterFooter/index.js","pages/House/components/FilterPicker/index.js","pages/House/components/FilterMore/index.js","pages/House/components/Filter/index.js","pages/House/index.js"],"names":["getFilters","id","request","get","params","getListByFilter","cityId","filters","start","end","getDetail","uploadHouseImg","formData","post","HouseItem","src","title","desc","tags","price","onClick","style","className","styles","house","imgWrap","img","alt","content","map","tag","index","tagClass","join","key","priceNum","module","exports","NoHouse","children","root","BASE_URL","msg","Object","defineProperty","value","obj","_PickerView","require","_PickerView2","__esModule","_classCallCheck3","_interopRequireDefault","_createClass3","_possibleConstructorReturn3","_inherits3","React","newObj","prototype","hasOwnProperty","call","_interopRequireWildcard","_Cascader2","_MultiPicker2","_Picker2","PickerView","_React$Component","this","_this","__proto__","getPrototypeOf","apply","arguments","isMultiPicker","props","data","Array","isArray","getCol","_this$props","pickerPrefixCls","indicatorStyle","itemStyle","col","createElement","prefixCls","flex","item","Item","label","cascade","onChange","onScrollChange","cols","pickerItemStyle","selectedValue","onValueChange","flexDirection","Component","defaultProps","titleList","type","FilterTitle","titleSeledStatus","onTitleClick","align","dropdown","selected","FilterFooter","onOk","onCancle","btn","cancel","ok","FilterPicker","state","console","log","sel","setState","FilterMore","seled","handlerSel","indexOf","splice","push","includes","tagActive","roomType","oriented","floor","characteristic","mask","dl","dt","dd","renderFilters","footer","area","mode","more","filterSels","Filter","openType","handlerSelStatus","onFilterSel","handlerFilters","getFilterData","getCurrCity","status","filterDatas","newSelSta","keys","forEach","filterType","cur","length","areaVal","areaKey","rentType","isShowPicker","subway","curFilterData","curSels","lastSel","renderFilterPicker","renderFilterMore","HouseList","list","count","getHouseList","rowRenderer","isScrolling","isVisible","houseImg","history","pathname","houseCode","a","abc","loading","isRowLoaded","loadMoreRows","startIndex","stopIndex","then","res","success","rowCount","onRowsRendered","registerChild","height","width","houseList","ref","rowHeight","renderList"],"mappings":"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","file":"static/js/8.a7751f77.chunk.js","sourcesContent":["import request from '../request'\n\n/**\n * 房屋=》后台接口\n */\n/**\n * 获取列表找房筛选条件数据\n * @param {*} id 当前定位城市的ID\n */\nexport function getFilters (id) {\n  return request.get('/houses/condition', {\n    params: { id }\n  })\n}\n\n/**\n * \n * @param {*} cityId 当前定位城市ID/小区ID\n * @param {*} filters 查询条件\n * @param {*} start 数据开始\n * @param {*} end  数据结束\n */\nexport function getListByFilter (cityId, filters, start = 1, end = 20) {\n  return request.get('/houses', {\n    params: {\n      cityId,\n      ...filters,\n      start,\n      end\n    }\n  })\n}\n\n/**\n * 房源详情\n * @param {*} id 房源ID\n */\nexport function getDetail (id) {\n  return request.get(`/houses/${id}`)\n}\n\n/**\n * 上传房源图片\n * @param {*} formData formData格式的图片数据\n */\nexport function uploadHouseImg (formData) {\n  return request.post('/houses/image', formData)\n}","import React from 'react'\r\n\r\nimport PropTypes from 'prop-types'\r\n// props\r\n// 1. cheldren -> 获取组件动态内容  <Child>adadsd</Child>\r\n// 2. defautProps -> 为组件设置默认属性  num\r\n// 3. prop-types -> 为组件的属性提供默认类型  age\r\n\r\nimport styles from './index.module.css'\r\n\r\nfunction HouseItem({ src, title, desc, tags, price, onClick, style }) {\r\n  return (\r\n    <div className={styles.house} onClick={onClick} style={style}>\r\n      <div className={styles.imgWrap}>\r\n        <img className={styles.img} src={src} alt=\"\" />\r\n      </div>\r\n      <div className={styles.content}>\r\n        <h3 className={styles.title}>{title}</h3>\r\n        <div className={styles.desc}>{desc}</div>\r\n        <div>\r\n          {/* ['近地铁', '随时看房'] */}\r\n          {tags.map((tag, index) => {\r\n            const tagClass = 'tag' + (index + 1)\r\n            return (\r\n              <span\r\n                className={[styles.tag, styles[tagClass]].join(' ')}\r\n                key={tag}\r\n              >\r\n                {tag}\r\n              </span>\r\n            )\r\n          })}\r\n        </div>\r\n        <div className={styles.price}>\r\n          <span className={styles.priceNum}>{price}</span> 元/月\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nHouseItem.propTypes = {\r\n  // src: PropTypes.string,\r\n  // title: PropTypes.string,\r\n  // desc: PropTypes.string,\r\n  // tags: PropTypes.array.isRequired,\r\n  // price: PropTypes.number,\r\n  // onClick: PropTypes.func\r\n}\r\n\r\nexport default HouseItem\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"house\":\"HouseItem_house__29lYP\",\"imgWrap\":\"HouseItem_imgWrap__3ZPoa\",\"img\":\"HouseItem_img__1BaJK\",\"content\":\"HouseItem_content__1gVhj\",\"title\":\"HouseItem_title__2dXar\",\"desc\":\"HouseItem_desc__5-mp4\",\"price\":\"HouseItem_price__1_r8v\",\"priceNum\":\"HouseItem_priceNum__RGpsE\",\"tag\":\"HouseItem_tag__3MxYv\",\"tag1\":\"HouseItem_tag1__3VDnD\",\"tag2\":\"HouseItem_tag2__2IcZc\",\"tag3\":\"HouseItem_tag3__2L6o6\"};","import React from 'react'\r\n\r\nimport PropTypes from 'prop-types'\r\n\r\nimport styles from './index.module.css'\r\nimport { BASE_URL } from '../../utils/request'\r\n\r\nconst NoHouse = ({ children }) => (\r\n  <div className={styles.root}>\r\n    <img\r\n      className={styles.img}\r\n      src={BASE_URL + '/img/not-found.png'}\r\n      alt=\"暂无数据\"\r\n    />\r\n    <p className={styles.msg}>{children}</p>\r\n  </div>\r\n)\r\n\r\nNoHouse.propTypes = {\r\n  children: PropTypes.node.isRequired\r\n}\r\n\r\nexport default NoHouse\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"NoHouse_root__1gj0t\",\"img\":\"NoHouse_img__2Ejwh\",\"msg\":\"NoHouse_msg__1MaAM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"FilterTitle_root__3IaLS\",\"dropdown\":\"FilterTitle_dropdown__20V2M\",\"selected\":\"FilterTitle_selected__Hcw38\"};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _PickerView = require('./PickerView');\n\nvar _PickerView2 = _interopRequireDefault(_PickerView);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nexports['default'] = _PickerView2['default'];\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar React = _interopRequireWildcard(_react);\n\nvar _Cascader = require('rmc-cascader/lib/Cascader');\n\nvar _Cascader2 = _interopRequireDefault(_Cascader);\n\nvar _MultiPicker = require('rmc-picker/lib/MultiPicker');\n\nvar _MultiPicker2 = _interopRequireDefault(_MultiPicker);\n\nvar _Picker = require('rmc-picker/lib/Picker');\n\nvar _Picker2 = _interopRequireDefault(_Picker);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\n/* tslint:disable:jsx-no-multiline-js */\nfunction getDefaultProps() {\n    return {\n        prefixCls: 'am-picker',\n        pickerPrefixCls: 'am-picker-col',\n        cols: 3,\n        cascade: true,\n        value: [],\n        onChange: function onChange() {}\n    };\n}\n\nvar PickerView = function (_React$Component) {\n    (0, _inherits3['default'])(PickerView, _React$Component);\n\n    function PickerView() {\n        (0, _classCallCheck3['default'])(this, PickerView);\n\n        var _this = (0, _possibleConstructorReturn3['default'])(this, (PickerView.__proto__ || Object.getPrototypeOf(PickerView)).apply(this, arguments));\n\n        _this.isMultiPicker = function () {\n            if (!_this.props.data) {\n                return false;\n            }\n            return Array.isArray(_this.props.data[0]);\n        };\n        _this.getCol = function () {\n            var _this$props = _this.props,\n                data = _this$props.data,\n                pickerPrefixCls = _this$props.pickerPrefixCls,\n                indicatorStyle = _this$props.indicatorStyle,\n                itemStyle = _this$props.itemStyle;\n\n            var formattedData = _this.isMultiPicker() ? data : [data];\n            return formattedData.map(function (col, index) {\n                return React.createElement(\n                    _Picker2['default'],\n                    { key: index, prefixCls: pickerPrefixCls, style: { flex: 1 }, indicatorStyle: indicatorStyle, itemStyle: itemStyle },\n                    col.map(function (item) {\n                        return React.createElement(\n                            _Picker2['default'].Item,\n                            { key: item.value, value: item.value },\n                            item.label\n                        );\n                    })\n                );\n            });\n        };\n        return _this;\n    }\n\n    (0, _createClass3['default'])(PickerView, [{\n        key: 'render',\n        value: function render() {\n            // tslint:disable-next-line:no-this-assignment\n            var props = this.props;\n\n            var picker = void 0;\n            if (props.cascade) {\n                picker = React.createElement(_Cascader2['default'], { prefixCls: props.prefixCls, pickerPrefixCls: props.pickerPrefixCls, data: props.data, value: props.value, onChange: props.onChange, onScrollChange: props.onScrollChange, cols: props.cols, indicatorStyle: props.indicatorStyle, pickerItemStyle: props.itemStyle });\n            } else {\n                picker = React.createElement(\n                    _MultiPicker2['default'],\n                    { prefixCls: props.prefixCls, selectedValue: props.value, onValueChange: props.onChange, onScrollChange: props.onScrollChange, style: { flexDirection: 'row' } },\n                    this.getCol()\n                );\n            }\n            return picker;\n        }\n    }]);\n    return PickerView;\n}(React.Component);\n\nexports['default'] = PickerView;\n\nPickerView.defaultProps = getDefaultProps();\nmodule.exports = exports['default'];","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"FilterFooter_root__1Tweg\",\"btn\":\"FilterFooter_btn__2mx57\",\"cancel\":\"FilterFooter_cancel__1ZwUx\",\"ok\":\"FilterFooter_ok__n6Bt1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"FilterMore_root__27bqG\",\"mask\":\"FilterMore_mask__qeQJG\",\"tags\":\"FilterMore_tags__2crgA\",\"tag\":\"FilterMore_tag__2yDA_\",\"tagActive\":\"FilterMore_tagActive__1R4Hk\",\"dl\":\"FilterMore_dl__1Bxih\",\"dt\":\"FilterMore_dt__1HDrv\",\"dd\":\"FilterMore_dd__2UjcS\",\"footer\":\"FilterMore_footer__56JWX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Filter_root__IW9xz\",\"mask\":\"Filter_mask__wpLxV\",\"content\":\"Filter_content__1dqQL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"House_root__1uAlf\",\"bg\":\"House_bg__EGYjg\",\"header\":\"House_header__2sRMv\",\"searchHeader\":\"House_searchHeader__2J-wf\",\"houseList\":\"House_houseList__3c2XV\",\"loading\":\"House_loading__D-_PM\"};","/**\r\n * 筛选器title\r\n */\r\nimport React from 'react'\r\n\r\nimport { Flex } from 'antd-mobile'\r\n\r\nimport styles from './index.module.css'\r\n\r\n// 条件筛选栏标题数组：\r\nconst titleList = [\r\n  { title: '区域', type: 'area' },\r\n  { title: '方式', type: 'mode' },\r\n  { title: '租金', type: 'price' },\r\n  { title: '筛选', type: 'more' }\r\n]\r\n\r\nexport default function FilterTitle (props) {\r\n  // console.log(props)\r\n  const { titleSeledStatus, onTitleClick } = props\r\n  // 渲染筛选器的title\r\n  const renderTitle = () => {\r\n    return titleList.map((item) => <Flex.Item onClick={\r\n      () => {\r\n        // 调用父组件的方法修改高亮状态\r\n        onTitleClick(item.type)\r\n      }\r\n    } key={item.type}>\r\n      {/* 选中类名： selected => styles.selected*/}\r\n      <span className={[styles.dropdown, titleSeledStatus[item.type] ? styles.selected : ''].join(' ')}>\r\n        <span>{item.title}</span>\r\n        <i className=\"iconfont icon-arrow\" />\r\n      </span>\r\n    </Flex.Item>)\r\n  }\r\n\r\n  return (\r\n    <Flex align=\"center\" className={styles.root}>\r\n      {\r\n        renderTitle()\r\n      }\r\n    </Flex>\r\n  )\r\n}\r\n","import React from 'react'\r\n\r\nimport { Flex } from 'antd-mobile'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport styles from './index.module.css'\r\n\r\nfunction FilterFooter ({ className, style, onOk, onCancle }) {\r\n  return (\r\n    <Flex style={style} className={[styles.root, className || ''].join(' ')}>\r\n      {/* 取消按钮 */}\r\n      <span onClick={onCancle} className={[styles.btn, styles.cancel].join(' ')}>取消</span>\r\n\r\n      {/* 确定按钮 */}\r\n      <span onClick={onOk} className={[styles.btn, styles.ok].join(' ')}>确定</span>\r\n    </Flex>\r\n  )\r\n}\r\n\r\n// props校验\r\nFilterFooter.propTypes = {\r\n  className: PropTypes.string,\r\n  style: PropTypes.object\r\n}\r\n\r\nexport default FilterFooter\r\n","/**\r\n * 前三个筛选器公共的picker组件\r\n */\r\nimport React, { Component } from 'react'\r\n\r\nimport { PickerView } from 'antd-mobile'\r\n\r\nimport FilterFooter from '../../../../components/FilterFooter'\r\n\r\nexport default class FilterPicker extends Component {\r\n\r\n  constructor(props) {\r\n    super(props)\r\n    console.log('1. 组件初始化=》只执行一次')\r\n  }\r\n\r\n  state = {\r\n    // 当前筛选器选中的值\r\n    value: this.props.value\r\n  }\r\n\r\n\r\n  render () {\r\n    const { onOk, onCancle, data, col } = this.props\r\n    // console.log(data)\r\n    return (\r\n      <>\r\n        {/* 选择器组件： */}\r\n        <PickerView\r\n          data={data}\r\n          value={this.state.value}\r\n          onChange={(sel) => {\r\n            console.log(sel)\r\n            this.setState({ value: sel })\r\n          }}\r\n          cols={col}\r\n        />\r\n\r\n        {/* 底部按钮 */}\r\n        <FilterFooter onOk={() => {\r\n          onOk(this.state.value)\r\n        }} onCancle={onCancle} />\r\n      </>\r\n    )\r\n  }\r\n}\r\n","/**\r\n * 更多筛选器\r\n */\r\nimport React, { Component } from 'react'\r\n\r\nimport FilterFooter from '../../../../components/FilterFooter'\r\n\r\nimport styles from './index.module.css'\r\n\r\nexport default class FilterMore extends Component {\r\n\r\n  state = {\r\n    // 已经选中的条件数据\r\n    seled: this.props.seled\r\n  }\r\n\r\n  // 处理选中的条件和高亮状态\r\n  handlerSel = (item) => {\r\n    console.log(item)\r\n    /**\r\n     * 1. 获取之前选中的值\r\n     * 2. 判断：如果之前选过=》删了；相反，没有选择过，就新增\r\n     */\r\n    const { seled } = this.state\r\n    // 返回下标\r\n    let index = seled.indexOf(item.value)\r\n    if (index > -1) {\r\n      // 选择过\r\n      seled.splice(index, 1)\r\n    } else {\r\n      // 没有选择过\r\n      seled.push(item.value)\r\n    }\r\n    // console.log(seled)\r\n    this.setState({ seled })\r\n  }\r\n\r\n\r\n  // 渲染标签\r\n  renderFilters (data) {\r\n    // 高亮类名： styles.tagActive\r\n    return data.map((item) => <span onClick={() => this.handlerSel(item)} key={item.value} className={[styles.tag, this.state.seled.includes(item.value) && styles.tagActive].join(' ')}>{item.label}</span>)\r\n  }\r\n\r\n  render () {\r\n    // console.log(this.props)\r\n    const { data: { roomType, oriented, floor, characteristic }, onOk, onCancle } = this.props\r\n    return (\r\n      <div className={styles.root}>\r\n        {/* 遮罩层 */}\r\n        <div className={styles.mask} onClick={onCancle} />\r\n\r\n        {/* 条件内容 */}\r\n        <div className={styles.tags}>\r\n          <dl className={styles.dl}>\r\n            <dt className={styles.dt}>户型</dt>\r\n            <dd className={styles.dd}>{this.renderFilters(roomType)}</dd>\r\n\r\n            <dt className={styles.dt}>朝向</dt>\r\n            <dd className={styles.dd}>{this.renderFilters(oriented)}</dd>\r\n\r\n            <dt className={styles.dt}>楼层</dt>\r\n            <dd className={styles.dd}>{this.renderFilters(floor)}</dd>\r\n\r\n            <dt className={styles.dt}>房屋亮点</dt>\r\n            <dd className={styles.dd}>{this.renderFilters(characteristic)}</dd>\r\n          </dl>\r\n        </div>\r\n\r\n        {/* 底部按钮 */}\r\n        <FilterFooter className={styles.footer} onOk={() => onOk(this.state.seled)} onCancle={onCancle} />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","/**\r\n * 过滤器组件\r\n */\r\nimport React, { Component } from 'react'\r\n\r\nimport FilterTitle from '../FilterTitle'\r\nimport FilterPicker from '../FilterPicker'\r\nimport FilterMore from '../FilterMore'\r\n\r\nimport styles from './index.module.css'\r\nimport { getFilters } from '../../../../utils/api/house'\r\nimport { getCurrCity } from '../../../../utils'\r\n\r\n\r\n// 设计选中筛选器的默认状态\r\nconst titleSeledStatus = {\r\n  // 区域\r\n  area: false,\r\n  // 方式\r\n  mode: false,\r\n  // 价格\r\n  price: false,\r\n  // 更多\r\n  more: false\r\n}\r\n\r\n// 设计筛选器选中的数据 \r\nconst filterSels = {\r\n  // 区域\r\n  area: [\"area\", \"null\"],\r\n  // 方式\r\n  mode: [\"null\"],\r\n  // 价格\r\n  price: [\"null\"],\r\n  // 更多\r\n  more: []\r\n}\r\n\r\n\r\nexport default class Filter extends Component {\r\n\r\n\r\n  state = {\r\n    // 筛选器的选中状态\r\n    titleSeledStatus: { ...titleSeledStatus },\r\n    // 当前选择的是那个筛选器\r\n    openType: ''\r\n  }\r\n\r\n  componentDidMount () {\r\n    // 初始化筛选器选中的值\r\n    this.filterSels = filterSels\r\n    this.getFilterData()\r\n  }\r\n\r\n\r\n\r\n  // 获取筛选条件数据\r\n  async getFilterData () {\r\n    //  获取定位城市数据\r\n    const { value } = await getCurrCity()\r\n    const { status, data } = await getFilters(value)\r\n    console.log(status, data)\r\n    if (status === 200) {\r\n      // 存储筛选条件数据到this\r\n      this.filterDatas = data\r\n    }\r\n  }\r\n\r\n  // 修改筛选器title的选中状态\r\n  onTitleClick = (type) => {\r\n    this.setState(\r\n      {\r\n        // 修改点击筛选器高亮状态\r\n        titleSeledStatus: { ...titleSeledStatus, [type]: true },\r\n        // 当前选择的是那个筛选器\r\n        openType: type\r\n      }\r\n    )\r\n    console.log('调用父组件的方法=》当前点击的筛选器', type)\r\n  }\r\n\r\n  // 是否显示前三个筛选器的内容\r\n  isShowPicker () {\r\n    // 当前选中的筛选器\r\n    const { openType } = this.state\r\n    return openType === 'area' || openType === 'mode' || openType === 'price'\r\n  }\r\n\r\n  /**\r\n   * 实现：如果筛选器，有选中条件就高亮筛选器的title（不是默认值）\r\n   */\r\n  handlerSelStatus () {\r\n    // 设置选中状态\r\n    const newSelSta = {}\r\n    Object.keys(this.filterSels).forEach((item) => {\r\n      // console.log(item)\r\n      // 当前过滤器的type\r\n      const filterType = item\r\n      // 当前过滤器选中的值\r\n      let cur = this.filterSels[filterType]\r\n      // 根据当前选中的值和默认值做对比\r\n      // 区域：默认值[\"area\", \"null\"]\r\n      if (filterType === 'area' && (cur[1] !== 'null' || cur[0] === 'subway')) {\r\n        newSelSta[filterType] = true\r\n      } else if (filterType === 'mode' && cur[0] !== 'null') {\r\n        newSelSta[filterType] = true\r\n      } else if (filterType === 'price' && cur[0] !== 'null') {\r\n        newSelSta[filterType] = true\r\n      } else if (filterType === 'more' && cur.length > 0) {\r\n        newSelSta[filterType] = true\r\n      }\r\n\r\n      else {\r\n        newSelSta[filterType] = false\r\n      }\r\n    })\r\n\r\n    return newSelSta\r\n\r\n  }\r\n\r\n  // 处理查询条件数据\r\n  handlerFilters () {\r\n    // 获取用户选择的查询条件\r\n    const { area, mode, price, more } = this.filterSels\r\n    // 组装查询条件\r\n    const filters = {}\r\n    // 1. 区域条件: 区域和地铁\r\n    let areaKey = area[0], areaVal\r\n    if (area.length === 2) {\r\n      areaVal = area[1]\r\n    } else {\r\n      if (area[2] !== 'null') {\r\n        areaVal = area[2]\r\n      } else {\r\n        areaVal = area[1]\r\n      }\r\n    }\r\n    filters[areaKey] = areaVal\r\n    // 2. 出租方式\r\n    filters.rentType = mode[0]\r\n    // 3. 价格\r\n    filters.price = price[0]\r\n    // 4. 更多\r\n    filters.more = more.join(',')\r\n    console.log('当前选择的查询条件（后台）：', filters)\r\n    return filters\r\n\r\n  }\r\n\r\n  // 点击确定的时候执行\r\n  onOk = (sel) => {\r\n    const { openType } = this.state\r\n    console.log('当前筛选器选中的值：', sel)\r\n    // 存储用户当前选择的筛选器条件\r\n    this.filterSels[openType] = sel\r\n    console.log(this.filterSels)\r\n    this.setState({\r\n      openType: '',\r\n      // 处理选中条件后title的状态\r\n      titleSeledStatus: this.handlerSelStatus()\r\n    }, () => {\r\n      // 传递查询条件=》父组件=》查询房源列表\r\n      this.props.onFilterSel(this.handlerFilters())\r\n\r\n    })\r\n  }\r\n\r\n  // 点击取消时候执行 => 关闭筛选器\r\n  onCancle = () => {\r\n    this.setState({\r\n      openType: '',\r\n      // 处理选中条件后title的状态\r\n      titleSeledStatus: this.handlerSelStatus()\r\n    })\r\n  }\r\n\r\n  // 传递数据并渲染picker组件\r\n  renderFilterPicker () {\r\n    if (this.isShowPicker()) {\r\n      // 处理当前用户选中的筛选器的数据\r\n      /**\r\n       * 1. 知道当前用户点击的是谁=》openType\r\n       * 2. 根据openType获取对应筛选器数据=》传递给FilterPicker\r\n       */\r\n      const { openType } = this.state\r\n      // 获取前三个筛选器数据\r\n      const { area, subway, rentType, price } = this.filterDatas\r\n      let curFilterData = [], col = 1\r\n      // 当前打开的筛选器选中的值\r\n      let curSels = this.filterSels[openType]\r\n      switch (openType) {\r\n        case 'area':\r\n          col = 3\r\n          curFilterData = [area, subway]\r\n          break\r\n        case 'mode':\r\n          curFilterData = rentType\r\n          break\r\n        default:\r\n          curFilterData = price\r\n      }\r\n\r\n      return <FilterPicker key={openType} data={curFilterData} value={curSels} col={col} onOk={this.onOk} onCancle={this.onCancle} />\r\n    }\r\n    return null\r\n  }\r\n\r\n\r\n  renderFilterMore () {\r\n    // 当前选中的筛选器\r\n    const { openType } = this.state\r\n    if (openType === 'more') {\r\n      const { roomType, oriented, floor, characteristic } = this.filterDatas\r\n      // 更多筛选器需要的数据\r\n      const data = { roomType, oriented, floor, characteristic }\r\n      // 获取用户上次选择的值\r\n      const lastSel = this.filterSels[openType]\r\n\r\n      return <FilterMore data={data} seled={lastSel} onOk={this.onOk} onCancle={this.onCancle} />\r\n    }\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <div className={styles.root}>\r\n        {/* 前三个菜单的遮罩层 */}\r\n        {this.isShowPicker() ? <div onClick={this.onCancle} className={styles.mask} /> : null}\r\n\r\n        <div className={styles.content}>\r\n          {/* 标题栏 */}\r\n          <FilterTitle titleSeledStatus={this.state.titleSeledStatus} onTitleClick={this.onTitleClick} />\r\n\r\n          {/* 前三个菜单对应的内容： */}\r\n          {\r\n            this.renderFilterPicker()\r\n          }\r\n\r\n          {/* 最后一个菜单对应的内容： */}\r\n          {this.renderFilterMore()}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","/**\r\n * 第二个标签栏的页面=》列表找房\r\n */\r\nimport React from 'react'\r\n\r\nimport { Toast } from 'antd-mobile'\r\n\r\nimport Filter from './components/Filter'\r\n// 导入局部样式\r\nimport styles from './index.module.css'\r\nimport { getCurrCity } from '../../utils'\r\nimport { getListByFilter } from '../../utils/api/house'\r\nimport { List, AutoSizer, InfiniteLoader } from 'react-virtualized'\r\nimport HouseItem from '../../components/HouseItem'\r\nimport { BASE_URL } from '../../utils/request'\r\nimport NoHouse from '../../components/NoHouse'\r\n\r\n\r\nexport default class HouseList extends React.Component {\r\n\r\n  state = {\r\n    // 房源列表数据\r\n    list: [],\r\n    // 房源数据的总条数\r\n    count: 0\r\n  }\r\n\r\n\r\n  // 回调函数：接收子组件的查询条件数据\r\n  onFilterSel = (filters) => {\r\n    console.log('父组件：接收用户选择的查询条件：', filters)\r\n    // 存储查询条件\r\n    this.filters = filters\r\n    // 每次选择完查询条件=》重新调用接口查询房源\r\n    this.getHouseList()\r\n  }\r\n\r\n  async componentDidMount () {\r\n    //  获取当前定位城市的ID\r\n    let { value } = await getCurrCity()\r\n    this.cityId = value\r\n    // 默认调用列表\r\n    this.getHouseList()\r\n  }\r\n\r\n  // 根据查询条件获取房源列表数据\r\n  async getHouseList () {\r\n    const { status, data: { list, count } } = await getListByFilter(this.cityId, this.filters)\r\n    // console.log(status, data)\r\n    if (status === 200) {\r\n      // 房源查询结果提示\r\n      count > 0 && Toast.success(`查询到${count}条房源数据！`)\r\n\r\n      this.setState({\r\n        list,\r\n        count\r\n      })\r\n    }\r\n  }\r\n\r\n  // 列表渲染的项item模版\r\n  rowRenderer = ({\r\n    key, // Unique key within array of rows\r\n    index, // Index of row within collection\r\n    isScrolling, // The List is currently being scrolled\r\n    isVisible, // This row is visible within the List (eg it is not an overscanned row)\r\n    style, // Style object to be applied to row (to position it)\r\n  }) => {\r\n    // 列表数据\r\n    const { list } = this.state\r\n    // 当前列表项的数据\r\n    let item = list[index]\r\n    // 处理上拉过快=》后台数据没有返回报错问题\r\n    if (!!item) {\r\n      // 处理图片地址\r\n      item.src = `${BASE_URL}${item.houseImg}`\r\n      return (\r\n        <HouseItem onClick={() => {\r\n          this.props.history.push({ pathname: '/detail/' + item.houseCode, data: { a: 123 }, abc: 100 })\r\n        }} {...item} key={key} style={style} />\r\n\r\n      )\r\n    } else {\r\n      // 后台数据还没加载完=》显示骨架屏\r\n      return (\r\n        <div style={style} key={key}>\r\n          <p className={styles.loading}></p>\r\n        </div>\r\n      )\r\n    }\r\n\r\n  }\r\n\r\n  // 判断当前行是否渲染完\r\n  isRowLoaded = ({ index }) => {\r\n    return !!this.state.list[index]\r\n  }\r\n\r\n  // 加载更多数据=>获取下一页数据\r\n  /**\r\n   * \r\n   * @param {*} startIndex-stopIndex 下一页数据的开始和结束位置 \r\n   */\r\n  loadMoreRows = ({ startIndex, stopIndex }) => {\r\n    // console.log(startIndex, stopIndex)\r\n    return getListByFilter(this.cityId, this.filters, startIndex, stopIndex).then((res) => {\r\n      const { status, data: { list } } = res\r\n      if (status === 200) {\r\n        this.setState({\r\n          list: [...this.state.list, ...list]\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n\r\n  // 渲染房源列表\r\n  renderList () {\r\n    const { count } = this.state\r\n    return (\r\n      count === 0 ? <NoHouse>暂无房源数据！</NoHouse> : <InfiniteLoader\r\n        isRowLoaded={this.isRowLoaded}\r\n        loadMoreRows={this.loadMoreRows}\r\n        // 列表数据的总条数\r\n        rowCount={this.state.count}\r\n      >\r\n        {({ onRowsRendered, registerChild }) => (\r\n          <AutoSizer>\r\n            {({ height, width }) => (\r\n              <List\r\n                className={styles.houseList}\r\n                onRowsRendered={onRowsRendered}\r\n                ref={registerChild}\r\n                // 列表数据的总条数\r\n                rowCount={this.state.count}\r\n                // 控制列表宽高\r\n                width={width}\r\n                height={height}\r\n                // 列表项的高度 => 动态设置高度\r\n                rowHeight={130}\r\n                // 选染列表项目\r\n                rowRenderer={this.rowRenderer}\r\n              />\r\n            )}\r\n          </AutoSizer>\r\n        )}\r\n      </InfiniteLoader>\r\n    )\r\n  }\r\n\r\n\r\n  render () {\r\n    return (\r\n      <div className={styles.root}>\r\n        {/* 条件筛选栏--先开发 */}\r\n        <Filter onFilterSel={this.onFilterSel} />\r\n        {/* 根据过滤条件=》渲染房源列表 */}\r\n        {this.renderList()}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n"],"sourceRoot":""}